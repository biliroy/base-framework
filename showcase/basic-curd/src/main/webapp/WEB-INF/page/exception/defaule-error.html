<#include "*/basic/default.html"/>

<#macro title>
	500
</#macro>

<#macro head>
	<script type="text/javascript">
		function sendError(id) {
			$.post("${base}/foundation/audit/operating-record/send-error",{id:id},function(data){
				$("#message").html(data);
				$("#alert-div").removeClass("hide");
			});
		}
	</script>
</#macro>

<#macro body>

	<div class="server-exception"> 
		
   		<center><h1><span class="glyphicon glyphicon-exclamation-sign"></span></h1></center>
   		<div class="alert alert-success fade in hide" id="alert-div">
			<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
			<span class="glyphicon glyphicon-ok"></span> <font id="message"></font>
		</div>
   		<h3>操作失败</h3> 
   		<hr> 
   		<p>原因:<#if exception.class == 'class org.exitsoft.showcase.service.ServiceException'>${exception.message}<#else>系统出现未知异常</#if></p> 
   		<p>
   			<button type="button" class="btn btn-default" onclick="history.back();">
   				<span class="glyphicon glyphicon-backward"></span> 返回
   			</button>
   			<button type="button" class="btn btn-danger" onclick="sendError('${record.id}');">
   				<span class="glyphicon glyphicon-phone-alt"></span> 发送错误报告
   			</button>
   		</p>
   	</div>
</#macro>

